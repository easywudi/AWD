<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="dtProject">
      <Property name="creationType">com.jintaimei.support.bean.ProjectInfo</Property>
      <PropertyDef name="projectId">
        <Property name="dataType">String</Property>
        <Property name="label">产品ID</Property>
      </PropertyDef>
      <PropertyDef name="projectName">
        <Property name="dataType">String</Property>
        <Property name="label">产品名称</Property>
      </PropertyDef>
      <PropertyDef name="projectType">
        <Property name="dataType">String</Property>
        <Property name="label">产品类型</Property>
      </PropertyDef>
      <PropertyDef name="projectAbout">
        <Property name="dataType">String</Property>
        <Property name="label">产品简介</Property>
      </PropertyDef>
      <PropertyDef name="imgFile">
        <Property name="dataType">String</Property>
        <Property name="label">预览图标</Property>
      </PropertyDef>
      <PropertyDef name="projectDescId">
        <Property name="dataType">String</Property>
        <Property name="label">描述ID</Property>
      </PropertyDef>
      <PropertyDef name="projectImgId">
        <Property name="dataType">String</Property>
        <Property name="label">图片ID</Property>
      </PropertyDef>
      <PropertyDef name="creator">
        <Property name="dataType">String</Property>
        <Property name="label">创建人</Property>
      </PropertyDef>
      <PropertyDef name="createTime">
        <Property name="dataType">Date</Property>
        <Property name="label">创建时间</Property>
      </PropertyDef>
      <PropertyDef name="state">
        <Property name="dataType">String</Property>
        <Property name="label">删除标示</Property>
      </PropertyDef>
      <Reference name="rfDetail">
        <Property name="dataType">[dtDetail]</Property>
        <Property name="parameter">$${this.projectId}</Property>
        <Property name="dataProvider">projectInfoPr#getProjectDesc</Property>
      </Reference>
      <Reference name="rfImg">
        <Property name="dataType">[dtImg]</Property>
        <Property name="dataProvider">projectInfoPr#getProjectImg</Property>
        <Property name="parameter">$${this.projectId}</Property>
      </Reference>
    </DataType>
    <DataType name="dtDetail">
      <Property name="creationType">com.jintaimei.support.bean.ProjectDesc</Property>
      <PropertyDef name="projectDescId">
        <Property name="dataType">String</Property>
        <Property name="label">描述ID</Property>
      </PropertyDef>
      <PropertyDef name="title">
        <Property name="dataType">String</Property>
        <Property name="label">标题</Property>
      </PropertyDef>
      <PropertyDef name="content">
        <Property name="dataType">String</Property>
        <Property name="label">内容</Property>
      </PropertyDef>
      <PropertyDef name="creator">
        <Property name="dataType">String</Property>
        <Property name="label">创建人</Property>
      </PropertyDef>
      <PropertyDef name="createTime">
        <Property name="dataType">Date</Property>
        <Property name="label">创建时间</Property>
      </PropertyDef>
      <PropertyDef name="state">
        <Property name="dataType">String</Property>
        <Property name="label">删除标示</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dtImg">
      <Property name="creationType">com.jintaimei.support.bean.ProjectImg</Property>
      <PropertyDef name="imgId">
        <Property name="dataType">String</Property>
        <Property name="label">图片ID</Property>
      </PropertyDef>
      <PropertyDef name="imgFile">
        <Property name="dataType">String</Property>
        <Property name="label">图片地址</Property>
      </PropertyDef>
      <PropertyDef name="imgName">
        <Property name="dataType">String</Property>
        <Property name="label">图片名称</Property>
      </PropertyDef>
      <PropertyDef name="imgOrder">
        <Property name="dataType">int</Property>
        <Property name="label">图片排序</Property>
      </PropertyDef>
      <PropertyDef name="creator">
        <Property name="dataType">String</Property>
        <Property name="label">创建人</Property>
      </PropertyDef>
      <PropertyDef name="createTime">
        <Property name="dataType">Date</Property>
        <Property name="label">创建时间</Property>
      </PropertyDef>
      <PropertyDef name="state">
        <Property name="dataType">String</Property>
        <Property name="label">删除标示</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <DataSet id="dsProject">
      <Property name="dataType">[dtProject]</Property>
      <Property name="pageSize">5</Property>
      <Property name="dataProvider">projectInfoPr#pageProjectInfo</Property>
    </DataSet>
    <Panel>
      <Property name="height">300</Property>
      <Buttons/>
      <Children>
        <ToolBar>
          <DataPilot>
            <Property name="dataSet">dsProject</Property>
          </DataPilot>
          <ToolBarButton>
            <Property name="caption">添加</Property>
            <Property name="icon">url(>skin>common/icons.gif) -120px 0px</Property>
          </ToolBarButton>
          <ToolBarButton>
            <Property name="caption">删除</Property>
            <Property name="icon">url(>skin>common/icons.gif) -140px 0px</Property>
          </ToolBarButton>
          <ToolBarButton>
            <Property name="caption">编辑图文</Property>
            <Property name="icon">url(>skin>common/icons.gif) -200px 0px</Property>
          </ToolBarButton>
          <ToolBarButton>
            <Property name="caption">编辑排序</Property>
            <Property name="icon">url(>skin>common/icons.gif) -280px -180px</Property>
          </ToolBarButton>
        </ToolBar>
        <DataGrid id="dgProject">
          <Property name="dataSet">dsProject</Property>
          <Property name="rowHeight">50</Property>
          <DataColumn name="projectName">
            <Property name="property">projectName</Property>
            <Property name="readOnly">true</Property>
          </DataColumn>
          <DataColumn name="projectType">
            <Property name="property">projectType</Property>
            <Property name="readOnly">true</Property>
          </DataColumn>
          <DataColumn name="projectAbout">
            <Property name="property">projectAbout</Property>
            <Property name="readOnly">true</Property>
          </DataColumn>
          <DataColumn name="imgFile">
            <ClientEvent name="onRenderCell">//var path = &quot;${request.getContextPath()}&quot;;
$(arg.dom).empty().xCreate(
		{
			tagName : &quot;IMG&quot;,
			src : $url(&quot;>&quot;
					+ arg.data.get(&quot;imgFile&quot;) ),
			style : &quot;width: 64px; height: 64px;margin: 2px&quot;
		});

dorado.TipManager.initTip(arg.dom.parentNode, {
	content : {
		tagName : &quot;IMG&quot;,
		src : $url(&quot;>&quot;
				+ arg.data.get(&quot;imgFile&quot;) ),
		style : &quot;width: 128px; height: 128px; margin: 8px&quot;
	},
	arrowDirection : &quot;top&quot;,
	arrowAlign : &quot;left&quot;
});</ClientEvent>
            <Property name="property">imgFile</Property>
            <Property name="caption">图片</Property>
            <Property name="supportsOptionMenu">false</Property>
            <Property name="width">100</Property>
            <Property name="readOnly">true</Property>
          </DataColumn>
          <DataColumn name="creator">
            <Property name="property">creator</Property>
            <Property name="readOnly">true</Property>
          </DataColumn>
          <DataColumn name="createTime">
            <Property name="property">createTime</Property>
            <Property name="readOnly">true</Property>
          </DataColumn>
        </DataGrid>
      </Children>
      <Tools/>
    </Panel>
    <Panel layout="hbox">
      <Buttons/>
      <Children>
        <Panel layout="vbox">
          <Property name="width">47%</Property>
          <Property name="height">100%</Property>
          <Buttons/>
          <Children>
            <ToolBar>
              <ToolBarButton>
                <Property name="caption">添加</Property>
                <Property name="icon">url(>skin>common/icons.gif) -120px 0px</Property>
              </ToolBarButton>
              <ToolBarButton>
                <Property name="caption">删除</Property>
                <Property name="icon">url(>skin>common/icons.gif) -140px 0px</Property>
              </ToolBarButton>
              <ToolBarButton>
                <Property name="caption">编辑描述</Property>
                <Property name="icon">url(>skin>common/icons.gif) -200px 0px</Property>
              </ToolBarButton>
              <ToolBarButton>
                <Property name="caption">编辑排序</Property>
                <Property name="icon">url(>skin>common/icons.gif) -280px -180px</Property>
              </ToolBarButton>
            </ToolBar>
            <DataGrid id="dsDetail">
              <Property name="dataSet">dsProject</Property>
              <Property name="dataPath">#.rfDetail</Property>
              <Property name="rowHeight">35</Property>
              <Property name="readOnly">false</Property>
              <DataColumn name="title">
                <Property name="property">title</Property>
                <Property name="readOnly">true</Property>
              </DataColumn>
              <DataColumn name="content">
                <Property name="property">content</Property>
                <Property name="readOnly">true</Property>
              </DataColumn>
              <DataColumn name="creator">
                <Property name="property">creator</Property>
                <Property name="readOnly">true</Property>
              </DataColumn>
              <DataColumn name="createTime">
                <Property name="property">createTime</Property>
                <Property name="readOnly">true</Property>
              </DataColumn>
            </DataGrid>
          </Children>
          <Tools/>
        </Panel>
        <Panel layout="vbox">
          <Property name="width">47%</Property>
          <Buttons/>
          <Children>
            <ToolBar>
              <ToolBarButton>
                <Property name="caption">添加</Property>
                <Property name="icon">url(>skin>common/icons.gif) -120px 0px</Property>
              </ToolBarButton>
              <ToolBarButton>
                <Property name="caption">删除</Property>
                <Property name="icon">url(>skin>common/icons.gif) -140px 0px</Property>
              </ToolBarButton>
              <ToolBarButton>
                <Property name="caption">编辑图片</Property>
                <Property name="icon">url(>skin>common/icons.gif) -200px 0px</Property>
              </ToolBarButton>
              <ToolBarButton>
                <Property name="caption">编辑排序</Property>
                <Property name="icon">url(>skin>common/icons.gif) -280px -180px</Property>
              </ToolBarButton>
            </ToolBar>
            <DataGrid id="dsImg">
              <Property name="dataSet">dsProject</Property>
              <Property name="dataPath">#.rfImg</Property>
              <Property name="rowHeight">50</Property>
              <DataColumn name="imgFile">
                <ClientEvent name="onRenderCell">//var path = &quot;${request.getContextPath()}&quot;;
$(arg.dom).empty().xCreate(
		{
			tagName : &quot;IMG&quot;,
			src : $url(&quot;>&quot;
					+ arg.data.get(&quot;imgFile&quot;) ),
			style : &quot;width: 64px; height: 64px;margin: 2px&quot;
		});

dorado.TipManager.initTip(arg.dom.parentNode, {
	content : {
		tagName : &quot;IMG&quot;,
		src : $url(&quot;>&quot;
				+ arg.data.get(&quot;imgFile&quot;) ),
		style : &quot;width: 128px; height: 128px; margin: 8px&quot;
	},
	arrowDirection : &quot;top&quot;,
	arrowAlign : &quot;left&quot;
});</ClientEvent>
                <Property name="property">imgFile</Property>
                <Property name="readOnly">true</Property>
                <Property name="caption">图片</Property>
                <Property name="width">100</Property>
              </DataColumn>
              <DataColumn name="creator">
                <Property name="property">creator</Property>
                <Property name="readOnly">true</Property>
              </DataColumn>
              <DataColumn name="createTime">
                <Property name="property">createTime</Property>
                <Property name="readOnly">true</Property>
              </DataColumn>
            </DataGrid>
          </Children>
          <Tools/>
        </Panel>
      </Children>
      <Tools/>
    </Panel>
    <Dialog id="descDialog">
      <Property name="width">600</Property>
      <Property name="height">400</Property>
      <Buttons>
        <Button>
          <Property name="caption">保存</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px 0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">var dialog = view.get(&quot;#descDialog&quot;);
dialog.hide();</ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -40px 0px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm>
          <Property name="dataSet">dsProject</Property>
          <Property name="dataPath">#.#rfDetail</Property>
          <Property name="cols">*</Property>
          <AutoFormElement>
            <Property name="name">title</Property>
            <Property name="property">title</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">content</Property>
            <Property name="property">content</Property>
            <Editor>
              <TextArea>
                <Property name="height">200</Property>
              </TextArea>
            </Editor>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <AjaxAction id="descAjax"/>
    <AjaxAction id="infoAjax"/>
    <AjaxAction id="imgAjax"/>
  </View>
</ViewConfig>
